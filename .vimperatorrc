" Options: ======================================================== {{{1
" exモード時の補完候補がTabキーを押さなくても自動的に表示されて、キー入力するたびに更新される
set wildoptions=auto
" AwesomeBarの補完候補をopenやtabopenの時に使う事が出来る
set complete=l
" クイックヒントモードでMigemoを使えるようにする。
set hintmatching=custom
" GUI関係の表示（ブックマークとスクロールバー）
set guioptions=Br
" ビープ音を鳴らさずビジュアルベルを使用
set visualbell
highlight Bell display:none

" ビジュアルベルを無効化
"set visualbellstyle=display:none;
" ヒストリー回数
set history=1000

" Google Suggest
"set complete=bshf
"set complete+=g

" onload時の自動フォーカスを取りやめる。
set focuscontent

" Mapping: ======================================================== {{{1
" タブの移動
noremap h <C-p>
noremap l <C-n>
noremap j 5<C-e>
noremap k 5<C-y>
noremap gh g0
noremap gl g$

" 補完リストの選択をC-n,C-pで
cnoremap <C-n> <TAB>
cnoremap <C-p> <S-TAB>

" bookmarkコメントを表示
noremap ,c :viewSBMComments<CR>

" URLショートカット
noremap gG <esc>:t http://www.google.co.jp/webhp?hl=ja&complete=1<cr>
noremap gY <esc>:t http://www.yahoo.co.jp/<cr>
noremap gB <esc>:t chrome://livedoorclip_incsearch/content/view.html<cr>
noremap gR <esc>:t http://reader.livedoor.com/reader/<cr>

" Mac標準のキーを使えるように
noremap  <M-c> <C-v><M-c>
inoremap <M-a> <C-v><M-a>
inoremap <M-z> <C-v><M-z>
inoremap <M-x> <C-v><M-x>
inoremap <M-c> <C-v><M-c>
inoremap <M-v> <C-v><M-v>
cnoremap <M-a> <C-v><M-a>
cnoremap <M-z> <C-v><M-z>
cnoremap <M-x> <C-v><M-x>
cnoremap <M-c> <C-v><M-c>
cnoremap <M-v> <C-v><M-v>

" Windows標準のキーを使えるように
noremap  <C-c> <C-v><C-c>
inoremap <C-a> <C-v><C-a>
inoremap <C-z> <C-v><C-z>
inoremap <C-x> <C-v><C-x>
inoremap <C-c> <C-v><C-c>
inoremap <C-v> <C-v><C-v>
cnoremap <C-a> <C-v><C-a>
cnoremap <C-z> <C-v><C-z>
cnoremap <C-x> <C-v><C-x>
cnoremap <C-c> <C-v><C-c>
cnoremap <C-v> <C-v><C-v>

" splitBrowser.js
noremap wc <C-w>c
noremap w0 <C-w>0
noremap w$ <C-w>$
noremap wac :only<CR>
noremap ws :split<CR>
noremap wv :vsplit<CR>
noremap wml :split -l<CR>
noremap wmr :split -r<CR>
noremap wmt :split -t<CR>
noremap wmb :split -b<CR>
noremap wj :split -b<CR>
noremap wk :split -t<CR>
noremap wl :split -r<CR>
noremap wh :split -l<CR>

" .vimperatorrcを再読み込み(:restartしなくてもいい)
noremap <silent> <space>rrc :mapc<CR>:cmapc<CR>:imapc<CR>:so ~/.vimperatorrc<CR>
noremap <silent> <space>rfi :mapc<CR>:cmapc<CR>:imapc<CR>:so ~/

" MacでCtrl+[でESC 
" Bug 432951の為使用できず
" http://developer.mozilla.org/ja/Gecko_Keypress_Event
" noremap  <Ctrl-[> <esc>
" inoremap  <Ctrl-[> <esc>
" cnoremap  <Ctrl-[> <esc>

inoremap <C-p> <UP>
inoremap <C-n> <DOWN>


" Plugins ========================================================={{{1

" direct_bookmark.js
let g:direct_sbm_use_services_by_tag = "l"
let g:direct_sbm_use_services_by_post = "l"
let g:direct_sbm_is_use_migemo = "true"
let g:direct_sbm_is_normalize = "false"

" feedsome_keys2.js
autocmd LocationChange .* :fmapc
autocmd LocationChange reader\\.livedoor\\.com/reader :fmap j k s a r p o v c g <Space> <S-Space> < > T
autocmd LocationChange mail\\.google\\.com/mail :fmap -depth 4 c / j k n p o u e x s r a # [ ] z ? gi gs gt gd ga gc

" SBM Comments Viewer
let g:def_sbms = "h"

" Etc: ============================================================ {{{1
"" フィードボタンをステータスラインに移動
"javascript <<EOM
"(function () {
" var feedButton = document.getElementById('feed-button');
" feedButton.parentNode.removeChild(feedButton);
" var feedPanel  = document.createElement('statusbarpanel');
" feedPanel.setAttribute('id', 'feed-panel-clone');
" feedPanel.appendChild(feedButton.cloneNode(true));
" document.getElementById('status-bar').insertBefore(
"     feedPanel,
"     document.getElementById('security-button')
"     );
" })();
"EOM

" }}}1
"" Firefoxのエラーコンソールにechoやechoerrのログを出力する {{{1
javascript <<EOM
// for liberator.echo()
let (echo_old = liberator.echo) {
    liberator.echo = function(str, flags) {
        liberator.log("echo: " + str, 0);
        return echo_old(str, flags);
    }
}

// for liberator.echoerr()
let (echoerr_old = liberator.echoerr) {
    liberator.echoerr = function(str, flags) {
        liberator.log("echoerr: " + str, 0);
        return echoerr_old(str, flags);
    }
}

// for liberator.echomsg() (only for Vimperator 2.0pre or later)
let (echomsg_old = liberator.echomsg) {
    liberator.echomsg = function(str, flags) {
        liberator.log("echomsg: " + str, 0);
        return echomsg_old(str, flags);
    }
}
EOM
" 1}}}

""source! ~/.vimperatorrc
" vim: set ft=vimperator:
